<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Painel Admin</title>
<script src="/socket.io/socket.io.js"></script>

<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial;
  padding:20px;
}
input,button {
  padding:8px;
  margin:5px;
  border:none;
  border-radius:5px;
}
button { cursor:pointer; }
#log {
  margin-top:10px;
  background:#000;
  padding:10px;
  height:150px;
  overflow:auto;
  font-size:13px;
}
.hidden { display:none; }
.controls button {
  width:50px;
  height:50px;
  font-size:18px;
}
</style>
</head>

<body>

<h2>ğŸŒ Painel Admin</h2>

<div id="auth">
<input id="key" placeholder="Admin Key">
<button onclick="auth()">Entrar</button>
</div>

<div id="panel" class="hidden">
<h3>Movimento</h3>

<div class="controls">
  <button onclick="move('up')">â†‘</button><br>
  <button onclick="move('left')">â†</button>
  <button onclick="move('down')">â†“</button>
  <button onclick="move('right')">â†’</button>
</div>

<h3>Comandos</h3>
<input id="msg" placeholder="Mensagem global">
<button onclick="sendMsg()">Enviar</button><br>

<button onclick="resetWorld()">â™» Resetar Mundo</button>
<button onclick="resetPlayers()">â™» Resetar Players</button>

<div id="log"></div>
</div>

<script>
const socket = io();

const authDiv = document.getElementById("auth");
const panel = document.getElementById("panel");
const logDiv = document.getElementById("log");

function log(t){
  const d = document.createElement("div");
  d.textContent = t;
  logDiv.appendChild(d);
  logDiv.scrollTop = logDiv.scrollHeight;
}

function auth(){
  socket.emit("adminAuth", key.value);
}

socket.on("adminAuthSuccess", () => {
  authDiv.style.display = "none";
  panel.classList.remove("hidden");
  log("âœ… Admin entrou no jogo");
});

socket.on("adminAuthFail", () => {
  alert("âŒ Chave errada");
});

function move(dir){
  socket.emit("adminMove", dir);
}

function sendMsg(){
  if(!msg.value.trim()) return;
  socket.emit("adminMessage", msg.value);
  log("ğŸ“¢ Mensagem enviada");
  msg.value="";
}

function resetWorld(){
  socket.emit("resetWorld");
  log("â™» Mundo resetado");
}

function resetPlayers(){
  socket.emit("resetPlayers");
  log("â™» Players resetados");
}
</script>

</body>
</html>
